# Data Model: Invoice Schema V1

**Version**: 1.0.0
**Status**: Draft

## Core Schema

The `InvoiceSchemaV1` is the source of truth for the invoice data structure. It is designed to be serialized into a URL-safe string.

### TypeScript Interface

```typescript
interface InvoiceSchemaV1 {
  /** Schema Version (Fixed: 1) */
  v: 1;
  /** Invoice ID (UUID or unique string) */
  id: string;
  /** Issue Date (Unix Timestamp in seconds) */
  iss: number;
  /** Due Date (Unix Timestamp in seconds) */
  due: number;
  /** Notes (Max 280 chars) */
  nt?: string;
  /** Network Chain ID (e.g., 1, 137) */
  net: number;
  /** Currency Symbol (e.g., "USDC", "ETH") */
  cur: string;
  /** Token Address (Optional, undefined for native) */
  t?: string;
  /** Token Decimals (Required for precision) */
  dec: number;
  /** Sender Info */
  f: {
    /** Name */
    n: string;
    /** Wallet Address */
    a: string;
    /** Email (Optional) */
    e?: string;
    /** Physical Address (Optional, multi-line allowed) */
    ads?: string;
    /** Phone (Optional) */
    ph?: string;
  };
  /** Client Info */
  c: {
    /** Name */
    n: string;
    /** Wallet Address (Optional) */
    a?: string;
    /** Email (Optional) */
    e?: string;
    /** Physical Address (Optional, multi-line allowed) */
    ads?: string;
    /** Phone (Optional) */
    ph?: string;
  };
  /** Line Items */
  it: Array<{
    /** Description */
    d: string;
    /** Quantity (BigInt string or number) */
    q: string | number;
    /** Rate/Price (BigInt string) */
    r: string;
  }>;
  /** Tax Rate (Percentage string e.g. "10%" or Fixed Amount string) */
  tax?: string;
  /** Discount (Percentage string e.g. "10%" or Fixed Amount string) */
  dsc?: string;
  /** Reserved: Metadata (Extensibility) */
  meta?: Record<string, unknown>;
  /** Reserved: Future use */
  _future?: unknown;
}
```

## Validation Rules (Zod)

1.  **Size Limit**: The final encoded URL string must be <= 2000 bytes.
2.  **Notes**: `nt` must be <= 280 characters.
3.  **Dates**: `iss` and `due` must be positive integers.
4.  **Addresses**: `f.a` and `c.a` (if present) must be valid Ethereum addresses (regex check).
5.  **Amounts**: `it[].r` must be a valid numeric string (regex `^\d+(\.\d+)?$`).

## URL Structure

Format: `https://voidpay.com/pay?d=<COMPRESSED_STRING>`

- **d**: Base64-like string generated by `lz-string.compressToEncodedURIComponent(JSON.stringify(invoice))`
