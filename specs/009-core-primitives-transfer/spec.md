# Feature Specification: Core UI Primitives Transfer

**Feature Branch**: `009-core-primitives-transfer`
**Created**: 2025-11-28
**Status**: Draft
**Input**: User description: "P0.8.0 - Core Primitives Transfer (Foundation): Transfer core UI primitives from AI Studio v3 design source including Input, Textarea, Badge, Typography, and Card components with TDD discipline and 80%+ test coverage"

_Note: Generated by `/speckit.specify` command per Constitutional Principle XV (SpecKit Workflow Compliance)_

## User Scenarios & Testing _(mandatory)_

### User Story 1 - Text Input with Validation Feedback (Priority: P1)

As a user filling out invoice forms, I need text input fields that clearly show labels, validation errors, and optional icons so I can quickly understand what information is required and fix any mistakes.

**Why this priority**: Input fields are foundational to the invoice editor - every form interaction depends on clear, accessible input components with proper error handling.

**Independent Test**: Can be fully tested by rendering an input with various states (default, error, with icon) and verifying visual and accessibility behavior.

**Acceptance Scenarios**:

1. **Given** an input field is rendered with a label, **When** the user views the form, **Then** the label is visible and associated with the input via accessible attributes
2. **Given** an input field with an error message, **When** the field is in error state, **Then** the error message is displayed below the input with appropriate error styling
3. **Given** an input field with an icon prop, **When** rendered, **Then** the icon is displayed in the designated position (leading or trailing)
4. **Given** an input field, **When** it receives focus, **Then** a visible focus indicator is displayed (focus glow effect)

---

### User Story 2 - Multi-line Text Entry for Notes (Priority: P2)

As an invoice creator, I need a textarea component for entering invoice notes that prevents unwanted resizing and provides consistent styling so my notes section looks professional.

**Why this priority**: Notes field is used in invoice creation but is secondary to core input fields. The 280-character limit (schema constraint) makes visual consistency important.

**Independent Test**: Can be tested by rendering textarea and verifying styling, resize behavior, and focus states.

**Acceptance Scenarios**:

1. **Given** a textarea is rendered, **When** the user attempts to resize it, **Then** the textarea maintains its original dimensions (resize disabled)
2. **Given** a textarea with a label, **When** rendered, **Then** the label is visible and associated with the textarea
3. **Given** a textarea, **When** it receives focus, **Then** a visible focus glow effect is displayed

---

### User Story 3 - Status Badges for Invoice States (Priority: P2)

As a user viewing invoices, I need visual badges that clearly indicate status (paid, pending, overdue, draft) with distinct styling so I can quickly scan and understand invoice states.

**Why this priority**: Badges provide critical visual feedback for invoice status throughout the payment flow.

**Independent Test**: Can be tested by rendering each badge variant and verifying correct visual appearance.

**Acceptance Scenarios**:

1. **Given** a badge with "default" variant, **When** rendered, **Then** it displays with neutral/default styling
2. **Given** a badge with "success" variant, **When** rendered, **Then** it displays with success styling (green tones)
3. **Given** a badge with "warning" variant, **When** rendered, **Then** it displays with warning styling (amber/yellow tones)
4. **Given** a badge with "outline" variant, **When** rendered, **Then** it displays with border-only styling (no fill)

---

### User Story 4 - Consistent Typography Hierarchy (Priority: P2)

As a user viewing invoices and the application, I need consistent typography with clear hierarchy (headings and body text) so information is easy to scan and understand.

**Why this priority**: Typography establishes visual hierarchy throughout the app - from hero sections to fine print.

**Independent Test**: Can be tested by rendering each typography variant and verifying correct sizing and styling.

**Acceptance Scenarios**:

1. **Given** a Heading component with "hero" variant, **When** rendered, **Then** it displays with the largest heading size
2. **Given** a Heading component with "h4" variant, **When** rendered, **Then** it displays with appropriate h4 styling
3. **Given** a Text component with "body" variant, **When** rendered, **Then** it displays with standard body text styling
4. **Given** a Text component with "tiny" variant, **When** rendered, **Then** it displays with smallest text styling (for fine print, captions)
5. **Given** a Text component with "large", "small", "muted", or "label" variant, **When** rendered, **Then** it displays with appropriate styling for each variant

---

### User Story 5 - Glass Effect Card Variant (Priority: P3)

As a user viewing the payment interface, I need card components with a glass (frosted) effect variant that complements the dark theme and network-colored ambient backgrounds.

**Why this priority**: Glass variant enhances visual design but existing card functionality works - this is an enhancement to an existing component.

**Independent Test**: Can be tested by rendering card with glass variant and verifying visual effect is applied.

**Acceptance Scenarios**:

1. **Given** a Card with "glass" variant, **When** rendered on a dark background, **Then** it displays with frosted glass effect (blur, transparency)
2. **Given** a Card with default variant, **When** rendered, **Then** it displays with standard card styling (no glass effect)
3. **Given** existing Card sub-components (CardHeader, CardContent, CardFooter, CardTitle, CardDescription), **When** used with any card variant, **Then** they function correctly without breaking changes

---

### Edge Cases

- What happens when an input has both an error message and helper text? Error takes precedence, helper text is hidden
- What happens when an input has both error state and an icon prop? Error styling is applied; user-provided icon remains visible in specified position (no conflict, independent concerns)
- How does the glass card appear on light backgrounds? Out of scope — Constitution XII mandates dark desk theme; glass variant designed for dark backgrounds only
- What happens when typography components receive no children? Renders empty element, no crash
- How do components behave with very long content? Text truncation or overflow based on container context (CSS `overflow: hidden` with `text-overflow: ellipsis` for single-line, natural wrap for multi-line)

## Requirements _(mandatory)_

### Functional Requirements

- **FR-001**: System MUST provide an Input component with label, error state, and optional single icon support (configurable as leading OR trailing position, not both)
- **FR-002**: System MUST provide a Textarea component with label support and disabled resize behavior
- **FR-003**: System MUST provide a Badge component with four distinct variants (default, success, warning, outline)
- **FR-004**: System MUST provide Heading typography component with visual variants (hero to h4) and polymorphic `as` prop for semantic HTML element control
- **FR-005**: System MUST provide Text typography component with visual variants (body, large, small, tiny, muted, label) and polymorphic `as` prop for semantic HTML element control
- **FR-006**: System MUST enhance existing Card component with a glass variant option
- **FR-007**: All components MUST follow CVA (class-variance-authority) variant pattern for styling
- **FR-008**: All components MUST be accessible (proper ARIA attributes, keyboard navigation where applicable)
- **FR-009**: Components MUST NOT break existing functionality (backward compatible for Card)
- **FR-010**: All components MUST achieve 80%+ test coverage before merge

### Key Entities

- **Input**: Form element with props for label, error message, optional icon (single position: leading or trailing), and standard input attributes
- **Textarea**: Multi-line form element with props for label and standard textarea attributes
- **Badge**: Visual indicator with variant prop controlling appearance (default, success, warning, outline)
- **Heading**: Typography element with variant prop for visual size (hero through h4) and `as` prop for semantic HTML element (h1-h6, defaults based on variant)
- **Text**: Typography element with variant prop for visual size (body, large, small, tiny, muted, label) and `as` prop for semantic HTML element (defaults: `<p>` for body/large/small, `<span>` for tiny/muted/label)
- **Card**: Container element with optional variant prop including new "glass" option

## Success Criteria _(mandatory)_

### Measurable Outcomes

- **SC-001**: All five component types (Input, Textarea, Badge, Heading, Text) are available for use in application features
- **SC-002**: Existing Card component enhanced with glass variant without breaking existing usage
- **SC-003**: Each component achieves 80%+ test coverage
- **SC-004**: Components render correctly on all supported screen sizes (mobile, tablet, desktop)
- **SC-005**: Components meet accessibility standards for form inputs and visual elements
- **SC-006**: Zero visual regression in existing application features using Card component

## Clarifications

### Session 2025-11-28

- Q: Should Input support icons in both positions simultaneously (leading AND trailing) or one position only? → A: Single icon position only (leading OR trailing, configurable)
- Q: How should hover and disabled states be styled for interactive components? → A: Defer to AI Studio v3 design source (extract exact values during implementation)
- Q: What blur radius and opacity values should the glass Card variant use? → A: Defer to AI Studio v3 design source (extract exact values during implementation)
- Q: Should Heading variant determine semantic HTML element or just visual styling? → A: Visual variant controls styling, separate `as` prop controls semantic element
- Q: Should Text component also have polymorphic `as` prop like Heading? → A: Yes, include `as` prop (default: `<p>` for body, `<span>` for inline variants)

## Assumptions

- Design source files in `assets/aistudio/v3/shared/ui/` are the authoritative reference for component behavior and styling (including hover, disabled, and transition states)
- Existing Card component architecture (CardHeader, CardContent, CardFooter, etc.) should be preserved
- CVA (class-variance-authority) pattern is already established in the codebase
- Focus glow effect uses the project's Electric Violet accent color (#7C3AED)
- Glass variant parameters (blur radius, opacity) will be extracted from AI Studio v3 design source

## Dependencies

- P0.7.5 (Radix UI primitives, CVA, Framer Motion) - Completed
- Vitest testing infrastructure (P0.6.7) - Completed

## Out of Scope

- Complex form validation logic (handled by features using these components)
- Form state management (handled by Zustand stores)
- Specific network-themed variants (handled separately in network theme system)
- Animation behavior beyond focus states (Framer Motion integration is separate concern)
