# Part 2: Architectural Hypotheses

> **Status:** Brainstorm Result
> **Date:** November 18, 2025
> **Topic:** Data Model, Storage & Tech Stack

## 2.1. –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö (URL State Architecture)

–¢–∞–∫ –∫–∞–∫ –º—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, –≤—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–Ω–≤–æ–π—Å–µ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ URL.

### 2.1.1. –°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö (JSON Schema)

–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—É—é –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—é –∫–ª—é—á–µ–π JSON, —á—Ç–æ–±—ã —É–º–µ—Å—Ç–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö –≤ –ª–∏–º–∏—Ç URL (–æ–±—ã—á–Ω–æ ~2000 —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∫—Ä–æ—Å—Å-–±—Ä–∞—É–∑–µ—Ä–Ω–æ—Å—Ç–∏ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ QR-–∫–æ–¥–æ–≤).

**Draft Interface:**

```typescript
interface InvoiceSchema {
  v: number // Version (e.g., 1). Allows future schema migrations.
  id: string // Invoice ID (e.g., "INV-001").
  iss: string // Issue Date (Unix Timestamp or YYYY-MM-DD).
  due: string // Due Date.
  nt?: string // Notes / Terms (Optional, max 280 chars).

  // Network & Token
  net: number // Chain ID (e.g., 1 for ETH, 42161 for Arbitrum).
  cur: string // Currency Symbol (USDC, ETH).
  t?: string // Token Address (undefined = Native Currency).
  dec: number // Token decimals (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û–ï –ü–û–õ–ï: –∑–∞–ø–µ–∫–∞–µ—Ç—Å—è –≤ URL –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ–ø–ª–∞—Ç—ã –±–µ–∑ RPC-–≤—ã–∑–æ–≤–æ–≤).

  // Sender (From) - –ö–ª—é—á "f"
  f: {
    n: string // Name / Company.
    a?: string // Address (Physical).
    e?: string // Email.
    w: string // Wallet Address (Receiver of funds).
  }

  // Client (To) - –ö–ª—é—á "c"
  c: {
    n: string // Name.
    a?: string // Address.
    e?: string // Email.
    w?: string // Optional Wallet Address (for verification).
  }

  // Line Items - –ö–ª—é—á "it"
  it: Array<{
    d: string // Description.
    q: number // Quantity.
    r: number // Rate (Price per unit).
  }>

  // Meta
  tax: number // Tax Rate (%).
  dsc: number // Discount Amount.
}
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ v1:**

- `nt` (Notes): –ñ–µ—Å—Ç–∫–∏–π –ª–∏–º–∏—Ç 280 —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ QR-–∫–æ–¥–∞.
- `c.w` (Client Wallet): –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–∞ (–µ—Å–ª–∏ –∏–∑–≤–µ—Å—Ç–µ–Ω –∞–¥—Ä–µ—Å –ø–ª–∞—Ç–µ–ª—å—â–∏–∫–∞).
- `net`: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ Chain ID –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Å–µ—Ç–µ–π.
- `dec` (Decimals): **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û–ï –ü–û–õ–ï (–í–∞—Ä–∏–∞–Ω—Ç –ê - Snapshot / Baked-in).** –°–æ–∑–¥–∞—Ç–µ–ª—å –∏–Ω–≤–æ–π—Å–∞ –¥–µ–ª–∞–µ—Ç –æ–¥–∏–Ω RPC-–∑–∞–ø—Ä–æ—Å `readContract(tokenAddress, 'decimals')` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏ "–∑–∞–ø–µ–∫–∞–µ—Ç" –∑–Ω–∞—á–µ–Ω–∏–µ –≤ URL (`&dec=6`), —á—Ç–æ–±—ã —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–ª–∞—Ç—ã –≥—Ä—É–∑–∏–ª–∞—Å—å –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö RPC-–≤—ã–∑–æ–≤–æ–≤. –≠—Ç–æ –ø–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –≤—Å–µ—Ö —Ç–æ–∫–µ–Ω–æ–≤ (–≤–∫–ª—é—á–∞—è –Ω–∞—Ç–∏–≤–Ω—ã–µ ETH/MATIC –≥–¥–µ `dec=18`).

### 2.1.2. –ü–∞–π–ø–ª–∞–π–Ω —Å–∂–∞—Ç–∏—è (Compression Pipeline)

–ß—Ç–æ–±—ã –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å —ç—Ç–æ—Ç JSON –≤ URL-–ø–∞—Ä–∞–º–µ—Ç—Ä `?d=...`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º:

1.  **Serialize:** –û–±—ä–µ–∫—Ç –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ JSON —Å—Ç—Ä–æ–∫—É.
2.  **Compress:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `lz-string` (–∞–ª–≥–æ—Ä–∏—Ç–º LZW), –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª—è JS.
    - –§—É–Ω–∫—Ü–∏—è: `LZString.compressToEncodedURIComponent(jsonString)`.
3.  **URL Construction:** –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä: `https://voidpay.xyz/pay?d={COMPRESSED_STRING}`.

_–û—Ç–∫–∞—Ç (Fallback):_ –ï—Å–ª–∏ –¥–ª–∏–Ω–∞ —Å–∂–∞—Ç–æ–π —Å—Ç—Ä–æ–∫–∏ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 2048 –±–∞–π—Ç, UI –±–ª–æ–∫–∏—Ä—É–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∏ –ø—Ä–æ—Å–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ ("Notes" –∏–ª–∏ "Items").

> **üî¨ Advanced Optimization (P1.42)**: –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è **Binary Codec** –¥–æ—Å—Ç–∏–≥–∞–µ—Ç 45-50% –ª—É—á—à–µ–≥–æ —Å–∂–∞—Ç–∏—è —á–µ—Ä–µ–∑ custom binary packing (UUID‚Üí16 bytes, addresses‚Üí20 bytes, timestamps‚Üí4 bytes) + dictionary compression + selective deflate. –≠—Ç–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç capacity —Å 2-3 line items –¥–æ 5-7 items. –°–º. –¥–µ—Ç–∞–ª–∏ –≤ `09-binary-codec-optimization.md`.

## 2.2. –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (Client-Side Storage)

–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º **LocalStorage** –±—Ä–∞—É–∑–µ—Ä–∞ –∫–∞–∫ "–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö" –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ **Zustand** —Å middleware `persist`.

### 2.2.1. Creator Store (`useCreatorStore`)

–•—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–æ–≥–æ, –∫—Ç–æ –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç —Å—á–µ—Ç–∞:

- **Preferences:** –®–∞–±–ª–æ–Ω "–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é" (–ú–æ–µ –∏–º—è, –ú–æ–π –∫–æ—à–µ–ª–µ–∫). –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑, –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤–æ –≤—Å–µ –Ω–æ–≤—ã–µ –∏–Ω–≤–æ–π—Å—ã.
- **History:** –ú–∞—Å—Å–∏–≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∏–Ω–≤–æ–π—Å–æ–≤.
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞: `{ id, clientName, amount, date, link, txHash?, paidAt? }`.
  - **Background Polling:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö –∏–Ω–≤–æ–π—Å–æ–≤ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ (–≥–¥–µ –Ω–µ—Ç `txHash`), –∏—Å–ø–æ–ª—å–∑—É—è Alchemy Transfers API, –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø–ª–∞—Ç–µ–∂–∞.
- **Drafts:** –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–æ—Ä–º—ã (—á—Ç–æ–±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –≤–∫–ª–∞–¥–∫–∏).
- **Invoice ID Counter:** –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–≤—Ç–æ-–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç —Å—á–µ—Ç—á–∏–∫ (INV-001, INV-002...), —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ LocalStorage –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –Ω—É–º–µ—Ä–∞—Ü–∏–∏.

### 2.2.2. Payer Store (`usePayerStore`)

–•—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–æ–≥–æ, –∫—Ç–æ –ø–ª–∞—Ç–∏—Ç:

- **Receipts:** –ú–∞—Å—Å–∏–≤ –æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö –∏–Ω–≤–æ–π—Å–æ–≤. –ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –º–æ–º–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞: `{ invoiceData, txHash, paidAt, networkId }`.

## 2.3. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ (Tech Stack)

–í—ã–±–æ—Ä —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –æ–±—É—Å–ª–æ–≤–ª–µ–Ω —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏: SEO (–¥–ª—è –ø—Ä–µ–≤—å—é —Å—Å—ã–ª–æ–∫), –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, Web3 —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å.

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç        | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è                                  | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                                                                                                                        |
| :--------------- | :------------------------------------------ | :------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Framework**    | **Next.js 14+ (App Router + Edge Runtime)** | Server Components –Ω—É–∂–Ω—ã –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ OG Images (–ø—Ä–µ–≤—å—é —Å—Å—ã–ª–æ–∫ –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö). Edge Runtime –¥–ª—è Serverless Proxy (–∑–∞—â–∏—Ç–∞ RPC –∫–ª—é—á–µ–π).    |
| **Language**     | **TypeScript**                              | –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∫—Ä–∏—Ç–∏—á–Ω–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–µ–Ω—å–≥–∞–º–∏ –∏ —Å–ª–æ–∂–Ω—ã–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö.                                                                    |
| **State**        | **Zustand**                                 | –õ–µ–≥—á–µ –∏ –ø—Ä–æ—â–µ Redux. –û—Ç–ª–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ LocalStorage "–∏–∑ –∫–æ—Ä–æ–±–∫–∏".                                                                                 |
| **Async Data**   | **TanStack Query**                          | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ RPC –∑–∞–ø—Ä–æ—Å–æ–≤, –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è, –ø–æ–ª–ª–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–æ–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.                                                                               |
| **Web3 Core**    | **Wagmi v2 + Viem**                         | Viem ‚Äî —Å–∞–º–∞—è –ª–µ–≥–∫–∞—è –∏ –±—ã—Å—Ç—Ä–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è. Wagmi –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–µ —Ö—É–∫–∏.                                                             |
| **Wallet UI**    | **RainbowKit v2**                           | –ö—Ä–∞—Å–∏–≤—ã–π –≥–æ—Ç–æ–≤—ã–π UI –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–æ–≤. –õ–µ–≥–∫–∞—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è, –ø–æ–ø—É–ª—è—Ä–µ–Ω –≤ Web3 –∫–æ–º—å—é–Ω–∏—Ç–∏. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Wagmi.                                |
| **RPC Provider** | **Alchemy + Infura**                        | Alchemy (primary) –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏, Infura (fallback) –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π failover —á–µ—Ä–µ–∑ Wagmi config.                                    |
| **Indexer API**  | **Alchemy Transfers API**                   | –î–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤—Ö–æ–¥—è—â–∏—Ö –ø–ª–∞—Ç–µ–∂–µ–π. –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å RPC –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º, –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π tier.                                                               |
| **Token Lists**  | **Uniswap Token List**                      | –°—Ç–∞–Ω–¥–∞—Ä—Ç –¥–µ-—Ñ–∞–∫—Ç–æ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤. Decentralized, –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∫—É—Ä–∞—Ü–∏–∏.                                                                  |
| **UI Styling**   | **Tailwind CSS**                            | –ë—ã—Å—Ç—Ä–∞—è –≤–µ—Ä—Å—Ç–∫–∞.                                                                                                                                   |
| **UI Kit**       | **shadcn/ui**                               | –ì–æ—Ç–æ–≤—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Radix UI), –∫–æ—Ç–æ—Ä—ã–µ –ª–µ–≥–∫–æ –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å.                                                                            |
| **Typography**   | **Geist Sans + Geist Mono**                 | –ï–¥–∏–Ω–∞—è —Å–µ–º—å—è —à—Ä–∏—Ñ—Ç–æ–≤ –æ—Ç Vercel. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è Next.js, –æ—Ç–ª–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ tabular-nums –¥–ª—è –º–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã—Ö —Ü–∏—Ñ—Ä.                                 |
| **PDF**          | **react-pdf (Lazy Load)**                   | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏–∑ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (Client-side only). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –±–∞–Ω–¥–ª. |
| **Compression**  | **lz-string**                               | LZW –∫–æ–º–ø—Ä–µ—Å—Å–∏—è –¥–ª—è —Å–∂–∞—Ç–∏—è JSON –≤ URL. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è JavaScript —Å—Ç—Ä–æ–∫.                                                                         |

## 2.3.1. –ó–∞—â–∏—Ç–∞ RPC –ö–ª—é—á–µ–π (API Key Security)

–û—Ç–∫–∞–∑ –æ—Ç —á–∏—Å—Ç–æ–≥–æ "Client-side only" –¥–ª—è RPC –∫–ª—é—á–µ–π –∏–∑-–∑–∞ —Ä–∏—Å–∫–∞ —É—Ç–µ—á–∫–∏ –∏ –∞–±—å—é–∑–∞.

**–†–µ—à–µ–Ω–∏–µ: Serverless Proxy**

- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** Next.js API Routes (Edge Runtime) —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –ø—Ä–æ–∫—Å–∏ –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ RPC –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ (Alchemy/Infura).
- **–ú–µ—Ö–∞–Ω–∏–∑–º:**
  1. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ `/api/rpc` –±–µ–∑ –∑–Ω–∞–Ω–∏—è –∫–ª—é—á–µ–π.
  2. Edge Function –¥–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–π RPC –∫–ª—é—á –∏–∑ environment variables.
  3. –§–æ—Ä–≤–∞—Ä–¥–∏—Ç –∑–∞–ø—Ä–æ—Å –∫ Alchemy/Infura.
  4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç –∫–ª–∏–µ–Ω—Ç—É.
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
  - –ö–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Vercel Environment Variables (–Ω–µ –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–¥–µ).
  - Rate limiting –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–æ–º–µ–Ω–∞, –∞ –Ω–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞.
  - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∞–±—å—é–∑–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).
- **Privacy Note:** –¢–µ–ª–µ–º–µ—Ç—Ä–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–µ–Ω–∞ (no Sentry, no analytics). Privacy Purist –ø–æ–¥—Ö–æ–¥.

## 2.4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω (Project Structure)

–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º **Feature-Sliced Design (FSD)** –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ –∏ –∏–∑–æ–ª—è—Ü–∏–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –æ—Ç UI.

- **Layers:** `app` (routing), `pages` (composition), `widgets` (ui blocks), `features` (actions), `entities` (business logic), `shared` (utils).
- **Routing Strategy:**
  - `/` -> Marketing Landing Page (SEO optimized).
  - `/create` -> Editor Application (Client-side logic heavy).
  - `/pay` -> Payer View (Dynamic context).

## 2.5. –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∏ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (Long-Term Reliability)

### 2.5.1. –°—Ç—Ä–∞—Ç–µ–≥–∏—è –û–±—Ä–∞—Ç–Ω–æ–π –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (Schema Versioning)

–û–ø—ã—Ç –ø—Ä–æ–µ–∫—Ç–æ–≤ —Ç–∏–ø–∞ _Excalidraw_ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –ª–æ–º–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ —Å—Å—ã–ª–∫–∏.

- **Immutability:** –ú—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –º–µ–Ω—è–µ–º –ª–æ–≥–∏–∫—É –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –≤–µ—Ä—Å–∏–π (`v:1`).
- **Migrations:** –ï—Å–ª–∏ –º—ã –≤–Ω–µ–¥—Ä—è–µ–º `v:2` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–ª—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ñ–∏–∞—Ç–∞), –º—ã —Å–æ–∑–¥–∞–µ–º —Å–ª–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ `src/migrations/migrateV1toV2.ts`. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–µ—Ä—Å–∏—é –≤ URL –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ "–Ω–∞ –ª–µ—Ç—É" –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç –≤ –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.
- **Reserved Fields:** –í —Å—Ö–µ–º–µ `v:1` –∑–∞—Ä–∞–Ω–µ–µ —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ–º –ø–æ–ª—è `meta` –∏–ª–∏ `_future` –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –±–µ–∑ —Å–º–µ–Ω—ã –≤–µ—Ä—Å–∏–∏.

### 2.5.2. Abuse Management (–ú–æ–¥–µ—Ä–∞—Ü–∏—è –±–µ–∑ –±—ç–∫–µ–Ω–¥–∞)

–†–∏—Å–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è —Ñ–∏—à–∏–Ω–≥–∞ (—Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–æ–π—Å–æ–≤ —Å —Ç–µ–∫—Å—Ç–æ–º "–°—Ä–æ—á–Ω–æ –æ–ø–ª–∞—Ç–∏—Ç–µ —à—Ç—Ä–∞—Ñ"). –¢–∞–∫ –∫–∞–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç, –º—ã –Ω–µ –º–æ–∂–µ–º —É–¥–∞–ª–∏—Ç—å –∏–Ω–≤–æ–π—Å.

- **Static Blocklist:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç –º–∞–ª–µ–Ω—å–∫–∏–π JSON-—Ñ–∞–π–ª —Å GitHub: `https://raw.githubusercontent.com/voidpay/blocklist/main/blocked-hashes.json`.
  - **–ò—Å—Ç–æ—á–Ω–∏–∫:** GitHub –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–æ—Å—Ç–æ—Ç—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Pull Request, –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å (CDN –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ) –∏ –ø—É–±–ª–∏—á–Ω—É—é –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å.
  - **–§–æ—Ä–º–∞—Ç:** `{ "hashes": ["sha256_hash_1", "sha256_hash_2"], "updated": "2025-11-18T12:00:00Z" }`
- **Logic:** –ï—Å–ª–∏ —Ö—ç—à –æ—Ç–∫—Ä—ã–≤–∞–µ–º–æ–≥–æ –∏–Ω–≤–æ–π—Å–∞ –µ—Å—Ç—å –≤ —Å–ø–∏—Å–∫–µ -> UI –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –∫—Ä–∞—Å–Ω—ã–º —ç–∫—Ä–∞–Ω–æ–º: _"This invoice has been reported for abuse"_.
- **Reporting:** –ö–Ω–æ–ø–∫–∞ "Report Abuse" –≤ —Ñ—É—Ç–µ—Ä–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç issue/PR –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å —Ö—ç—à–µ–º –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω–æ–π —Å—Å—ã–ª–∫–∏.
- **Privacy Note:** –•—ç—à –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –æ—Ç –≤—Å–µ–≥–æ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `?d=...`, –∞ –Ω–µ –æ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ –∏–Ω–≤–æ–π—Å–∞.

---

_–ö–æ–Ω–µ—Ü –ß–∞—Å—Ç–∏ 2_
