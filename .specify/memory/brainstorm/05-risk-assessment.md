# Part 5: Risk Assessment & Mitigation

> **Status:** Brainstorm Result
> **Date:** November 18, 2025
> **Topic:** Technical, UX, and Compliance Risks

## 5.1. Технические риски (Technical Risks)

| Риск                                                | Вероятность | Критичность | План действий (Mitigation)                                                                                                                                                                                                               |
| :-------------------------------------------------- | :---------- | :---------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **RPC Key Leak** (Утечка API ключей и абьюз)        | Высокая     | Критическая | **Решение: Serverless Proxy.** Next.js API Routes (Edge Runtime) работают как прокси между клиентом и RPC провайдерами. Ключи хранятся в Vercel Environment Variables, не экспонируются в клиентском коде.                               |
| **RPC Rate Limits** (Сайт падает от наплыва юзеров) | Средняя     | Высокая     | 1. Использовать платные RPC (Alchemy/Infura) с тарифом Growth.<br>2. Настроить RPC Failover (список из 3 провайдеров в Wagmi config).<br>3. Кэшировать статические данные (decimals, symbols) через React Query (`staleTime: Infinity`). |
| **Browser Storage Wipe** (Потеря истории)           | Высокая     | Средняя     | 1. Функция экспорта/импорта JSON файла с историей.<br>2. Ручной backup/restore через LocalStorage.                                                                                                                                       |
| **URL Length Limit** (QR-код не читается)           | Низкая      | Высокая     | 1. Жесткий лимит на поле "Description" (280 символов).<br>2. Блокировка генерации, если сжатая строка > 2000 символов.<br>3. Использование коротких ключей в JSON схеме.                                                                 |
| **Schema Breaking** (Старые ссылки не открываются)  | Средняя     | Высокая     | Внедрить строгий Versioning (`v:1`). Покрыть тестами открытие ссылок, сгенерированных старыми версиями кода.                                                                                                                             |

## 5.2. UX Риски (User Experience Risks)

| Риск                             | Описание                                                                                   | План действий (Mitigation)                                                                                                               |
| :------------------------------- | :----------------------------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------- |
| **Partial Payments** (Недоплата) | Пользователь перевел 995 из 1000 USDC (комиссия биржи или ошибка). Скрипт не видит оплату. | Внедрить статус "Partially Paid". Показывать прогресс-бар: "Received 995/1000". Дать получателю возможность вручную пометить как "Paid". |
| **Fee-on-Transfer Tokens**       | Токены с налогом на перевод. Отправлено 1000, дошло 950.                                   | Показывать предупреждение при выборе таких токенов. Использовать "Fuzzy Matching" с допуском погрешности (например, 1-5%).               |
| **In-App Browsers**              | Telegram/Instagram браузеры не поддерживают коннект кошелька или ломают ссылки.            | Детектить User Agent. Если это In-App Browser -> Показывать заглушку: "Please open in System Browser (Safari/Chrome) to pay".            |

## 5.3. Юридические и Compliance Риски

| Риск                             | Описание                                                                                                       | План действий (Mitigation)                                                                                                                                                                                                                                                                                                    |
| :------------------------------- | :------------------------------------------------------------------------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Sanctions (OFAC)**             | Использование интерфейса для финансирования подсанкционных лиц. Риск блокировки домена.                        | **MVP:** Не внедрять OFAC проверку (true permissionless подход).<br>**Post-MVP:** Рассмотреть опциональную проверку через локальный JSON список или disclaimer при генерации.<br>**Обоснование:** Философия проекта — permissionless. Цензура противоречит crypto ethos. Риск блокировки минимизируем через Abuse Management. |
| **Privacy Leak**                 | Пользователь публикует ссылку в общем чате, раскрывая свои доходы.                                             | Добавить явный дисклеймер при генерации ссылки: _"Warning: Anyone with this link can view payment details. Share privately."_                                                                                                                                                                                                 |
| **Domain Blacklisting** (Фишинг) | Мошенники используют доверие к домену для маскировки вредоносных ссылок. Google/Metamask блокирует весь домен. | 1. Внедрить Static Blocklist.<br>2. **Strict No-Index:** Добавить HTTP заголовок `X-Robots-Tag: noindex` и мета-тег `<meta name="robots" content="noindex, nofollow">` для всех страниц `/pay` и `/create`, чтобы они не попадали в Google и не индексировались спамерами. Только лендинг `/` должен индексироваться.         |
| **Support Liability**            | Пользователи требуют возврата средств от разработчиков платформы.                                              | Явный UI Disclaimer в футере и при оплате: _"VoidPay is a non-custodial interface. We do not process payments and cannot reverse transactions."_                                                                                                                                                                              |

---

_Конец Части 5_
